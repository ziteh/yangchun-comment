---
title: Getting Started
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Aside } from '@astrojs/starlight/components';

**Yang Chun Comment** æ˜¯ä¸€å€‹è¼•é‡ä¸”æ³¨é‡éš±ç§çš„ç•™è¨€ç³»çµ±ï¼Œå‰ç«¯ä½¿ç”¨ [Lit](https://lit.dev/)ï¼Œä¾¿æ–¼åµŒå…¥å„ç¨®å‰ç«¯æ¡†æ¶ã€‚å¾Œç«¯ä½¿ç”¨ [Hono](https://hono.dev/)ï¼Œè¨­è¨ˆé‹è¡Œåœ¨ [Cloudflare Workers](https://workers.cloudflare.com/) ç„¡ä¼ºæœå™¨å¹³å°ã€‚éå¸¸é©åˆå€‹äººéƒ¨è½æ ¼æˆ–å°å‹ç¶²ç«™ï¼ˆæœ‰æ™‚äººå€‘åªæ˜¯æƒ³è¦ç°¡å–®åœ°å›æ‡‰ä¸€å€‹ï¼š*é…·ï¼*ï¼‰ã€‚

âœ¨ å°æ–¼ç•™è¨€è€…ä¾†èªªï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹è‰²:

- ç„¡éœ€è¨»å†Šæˆ–ç™»å…¥
- ç„¡éœ€ä½¿ç”¨ cookie
- ä¸æ”¶é›†å€‹äººè³‡æ–™ï¼ŒåŒ…å«å§“åã€Emailã€IP åœ°å€ã€User-Agent ç­‰
- ä¸é€²è¡Œç€è¦½å™¨æŒ‡ç´‹è­˜åˆ¥

## 1. æº–å‚™

Yang Chun Comment æ˜¯ä¸€å€‹ Monorepo å°ˆæ¡ˆï¼Œä½¿ç”¨ pnpm workspacesï¼Œä¸»è¦åŒ…å«å‰ç«¯ (client) å’Œå¾Œç«¯ (server)ã€‚ä»¥ä¸‹æ­¥é©Ÿä½¿ç”¨ pnpm ä½œç‚ºå¥—ä»¶ç®¡ç†å·¥å…·ã€‚

ç”±æ–¼å¾Œç«¯æœƒéƒ¨ç½²åœ¨ Cloudflare Workers ä¸Šï¼Œå› æ­¤ä½ éœ€è¦è¨»å†Šä¸€å€‹ [Cloudflare å¸³è™Ÿ](https://dash.cloudflare.com/sign-up)ã€‚å…è²»æ–¹æ¡ˆå³å¯æ‡‰ä»˜çµ•å¤§å¤šæ•¸çš„å€‹äººéœ€æ±‚ã€‚

é¦–å…ˆè¦å¾ GitHub ä¸Š clone å°ˆæ¡ˆï¼Œä¸¦é€²å…¥å°ˆæ¡ˆç›®éŒ„ï¼š

```bash
git clone https://github.com/ziteh/yangchun-comment.git yangchun-comment
```
```bash
cd yangchun-comment
```

å®‰è£ä¾è³´ä¸¦é€²è¡Œå°ˆæ¡ˆå»ºç½®ï¼š

```bash
pnpm install
```
```bash
pnpm build
```

## 2. å¾Œç«¯ (server)

å¾å°ˆæ¡ˆç›®éŒ„é€²å…¥å¾Œç«¯ç›®éŒ„ï¼š

```bash
cd server
```

### A. å»ºç«‹ D1

å»ºç«‹ä¸€å€‹ [D1][cf-d1] è³‡æ–™åº«ï¼Œé€™æ˜¯ Cloudflare æä¾›çš„ SQLite ç›¸å®¹è³‡æ–™åº«æœå‹™ï¼ŒYang Chun Comment ä¸»è¦ä½¿ç”¨å®ƒä¾†å­˜æ”¾ç•™è¨€è³‡æ–™ã€‚ä»¥ä¸‹æŒ‡ä»¤ä¸­çš„ `yangchun-comment-d1` æ˜¯é€™å€‹è³‡æ–™åº«çš„åç¨±ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹ã€‚é—œæ–¼ D1 çš„å…è²»é¡åº¦ï¼Œè«‹åƒè€ƒ [D1 Pricing][cf-d1-price]ã€‚å¦‚æœä½ éœ€è¦æŒ‡å®šåœ°å€ï¼Œå¯ä»¥ä½¿ç”¨ `--location` æˆ– `--jurisdiction`ï¼Œè©³ç´°è«‹åƒè€ƒ [Cloudflare çš„æ–‡ä»¶](https://developers.cloudflare.com/workers/wrangler/commands/#d1-create)

```bash
pnpm exec wrangler d1 create "yangchun-comment-d1" --binding "DB"
```

é è¨ˆæœƒå¾—åˆ°é¡ä¼¼ä¸‹é¢çš„å›æ‡‰ï¼Œä¸‹é¢çš„å›æ‡‰çœ‹å‡ºé€™å€‹ D1 å»ºç«‹åœ¨ APACï¼ˆAsia Pacificï¼‰ã€‚ä½ éœ€è¦è¤‡è£½å›æ‡‰ä¸­çš„ `id`ã€‚

```txt "a99c5674-5526-49fd-z98e-7493ce28bsx5"
âœ… Successfully created DB 'yangchun-comment-d1' in region APAC
Created your new D1 database.

To access your new D1 Database in your Worker, add the following snippet to your configuration file:
[[d1_databases]]
binding = "DB"
database_name = "yangchun-comment-d1"
database_id = "a99c5674-5526-49fd-z98e-7493ce28bsx5"
```

æ›´æ–°ä½ çš„ `wrangler.toml`ï¼Œå°‡ä¸Šé¢å›æ‡‰ä¸­çš„ `id` è²¼ä¸Šï¼š

```toml frame="auto" "a99c5674-5526-49fd-z98e-7493ce28bsx5"
# wrangler.toml
...

[[d1_databases]]
binding = "DB"
database_name = "yangchun-comment-d1"
database_id = "a99c5674-5526-49fd-z98e-7493ce28bsx5" # <-- Replace with your D1 ID

...
```

D1 å»ºç«‹å®Œæˆå¾Œï¼Œæ¥è‘—è¦åˆå§‹åŒ–è³‡æ–™åº«çµæ§‹ã€‚è¨˜å¾—è¦å°‡è³‡æ–™åº«åç¨±æ›¿æ›æˆä½ è‡ªå·±çš„åç¨±ï¼ˆå¦‚æœæœ‰ä¿®æ”¹çš„è©±ï¼‰ï¼š

```bash
pnpm exec wrangler d1 migrations apply "yangchun-comment-d1" --remote
```

ä½ æ‡‰è©²æœƒçœ‹åˆ°é¡ä¼¼ä¸‹é¢çš„å›æ‡‰ï¼Œç¢ºèªå¾Œè¼¸å…¥ `Y` ä»¥ç¹¼çºŒï¼š

```txt "(Y/n)"
Migrations to be applied:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ name                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0000_initial_schema.sql â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ” About to apply 1 migration(s)
Your database may not be available to serve requests during the migration, continue? (Y/n)
```

### B. å»ºç«‹ KV

å»ºç«‹ä¸€å€‹ [KV][cf-kv] Namespaceï¼Œé€™æ˜¯ Cloudflare æä¾›çš„ Key-Value å„²å­˜æœå‹™ï¼ŒYang Chun Comment ä¸»è¦ä½¿ç”¨å®ƒä¾†å­˜æ”¾å¿«å–è³‡æ–™ã€‚ä¸‹é¢çš„æŒ‡ä»¤ä¸­çš„ `yangchun-comment-kv` æ˜¯é€™å€‹ namespace çš„åç¨±ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹ã€‚é—œæ–¼ KV çš„å…è²»é¡åº¦ï¼Œè«‹åƒè€ƒ [KV Pricing][cf-kv-price]ã€‚

```bash
pnpm exec wrangler kv namespace create "yangchun-comment-kv" --binding "KV"
```

é è¨ˆæœƒå¾—åˆ°é¡ä¼¼ä¸‹é¢çš„å›æ‡‰ã€‚ä½ éœ€è¦è¤‡è£½å›æ‡‰ä¸­çš„ `id`ã€‚

```txt "506ac68ae906458692g22933d3896af3"
ğŸŒ€ Creating namespace with title "yangchun-comment-kv"
âœ¨ Success!
To access your new KV Namespace in your Worker, add the following snippet to your configuration file:
[[kv_namespaces]]
binding = "KV"
id = "506ac68ae906458692g22933d3896af3"
```

æ›´æ–°ä½ çš„ `wrangler.toml`ï¼Œå°‡ä¸Šé¢å›æ‡‰ä¸­çš„ `id` è²¼ä¸Šï¼š

```toml frame="auto" "506ac68ae906458692g22933d3896af3"
# wrangler.toml
...

[[kv_namespaces]]
binding = "KV"
id = "506ac68ae906458692g22933d3896af3" # <-- Replace with your KV ID

...
```

### C. é…ç½®ç’°å¢ƒè®Šæ•¸

`wrangler.toml` ä¸­æœ‰ä¸€äº›è®Šæ•¸éœ€è¦æ ¹æ“šä½ çš„éœ€æ±‚ä¾†ä¿®æ”¹ï¼š

```toml frame="auto"
# wrangler.toml
...
[vars]
# é€™äº›è®Šæ•¸å¿…é ˆæ ¹æ“šä½ çš„æƒ…æ³ä¾†ä¿®æ”¹
ADMIN_USERNAME = "admin" # Admin username
PRE_POW_MAGIC_WORD = "MAGIC" # The magic word for the pre-proof-of-work
FRONTEND_URL = "https://your-frontend-url.com" # Frontend URL
CORS_ORIGIN = "http://localhost:5173" # CORS origin, use "*" to allow all origins

# é€™äº›è®Šæ•¸å¯ä»¥ä¿ç•™é è¨­å€¼
RSS_SITE_PATH = "site"   # The path for the all-site RSS feed
MAX_ALL_SITE_RSS_COMMENTS = 20   # The max number of comments in the all-site RSS feed
MAX_THREAD_RSS_COMMENTS = 10     # The max number of comments in the thread RSS feed
PRE_POW_DIFFICULTY = 2        # The difficulty for the pre-proof-of-work
PRE_POW_TIME_WINDOW = 60      # The time window (in seconds) for the pre-proof-of-work
FORMAL_POW_DIFFICULTY = 4 # The difficulty for the formal proof-of-work
FORMAL_POW_EXPIRATION = 300  # The expiration time (in seconds) for the formal proof-of-work challenges

...
```

<Aside type="danger">
å¸¶æœ‰ `SECRET_` å‰ç¶´çš„è®Šæ•¸æ˜¯æ•æ„Ÿè³‡è¨Šï¼Œçµ•å°ä¸æ‡‰è©²å¯«åœ¨ `wrangler.toml` ä¸­ï¼Œä¹Ÿä¸æ‡‰è©²æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ï¼ˆä¾‹å¦‚ Gitï¼‰æˆ–å…¬é–‹å®ƒå€‘ã€‚

è«‹åƒè€ƒå¾ŒçºŒçš„èªªæ˜ä¾†è™•ç†é€™äº›å¯†é‘°ã€‚
</Aside>

### D. ä¸Šå‚³å¯†é‘°

Yang Chun Comment éœ€è¦ä¸€äº›å¯†é‘°ä¾†ç¢ºä¿å®‰å…¨æ€§ã€‚è«‹åƒè€ƒä¸‹æ–¹èªªæ˜ä¾†ç”¢ç”Ÿä¸¦ä¸Šå‚³é€™äº›å¯†é‘°ã€‚é€™äº›å¯†é‘°æœƒå„²å­˜åœ¨ Cloudflare Workers çš„ [Secrets][cf-secret] ä¸­ã€‚

é¦–å…ˆå»ºç«‹ä¸€å€‹ç©ºçš„ `.dev.vars` æª”æ¡ˆåœ¨ `server/` ç›®éŒ„ä¸‹ï¼Œé€™å€‹æª”æ¡ˆå’Œ `.env` æª”æ¡ˆé¡ä¼¼ï¼Œç”¨ä¾†å­˜æ”¾ç’°å¢ƒè®Šæ•¸ã€‚

**æ³¨æ„ï¼šä¸è¦å°‡é€™å€‹æª”æ¡ˆå…¬é–‹æˆ–æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ï¼ˆä¾‹å¦‚ Gitï¼‰ä¸­ã€‚**

```bash
touch .dev.vars
```

é¦–å…ˆæ˜¯ç®¡ç†å“¡ç™»å…¥å¯†ç¢¼ã€‚Yang Chun Comment ä½¿ç”¨ PBKDF2-HMAC-SHA256 ä½œç‚ºå¯†ç¢¼é›œæ¹Šæ¼”ç®—æ³•ï¼Œè¨­å®šè¼¸å‡ºé•·åº¦ç‚º 32 bytesï¼Œä¸¦æ¡ç”¨ 100,000 æ¬¡è¿­ä»£ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ Node.js è…³æœ¬ä¾†ç”¢ç”Ÿï¼š

```bash
node generate-password-hash.js <YOUR_ADMIN_PASSWORD>
```

é€™æœƒè¼¸å‡ºé¡ä¼¼ä¸‹é¢çš„å›æ‡‰ï¼Œå°‡æœ€å¾Œå…©è¡Œçš„å€¼è¤‡è£½åˆ° `.dev.vars` æª”æ¡ˆä¸­ï¼š

```txt {15,16}
=== PBKDF2 Password Hash ===
Iterations: 100000
Key Length: 32 bytes
Digest: sha256

Hash:
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

Salt:
yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy

------------------------------
Put the following secrets into your wrangler.toml or .env or .dev.vars file:

SECRET_ADMIN_PASSWORD_HASH=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SECRET_ADMIN_PASSWORD_SALT=yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy
```

å†ä¾†è¦ç”¢ç”Ÿå…¶ä»–çš„å¯†é‘°ï¼ŒåŒ…å«äº† `SECRET_ADMIN_JWT_KEY`ã€`SECRET_COMMENT_HMAC_KEY`ã€`SECRET_FORMAL_POW_HMAC_KEY` ä»¥åŠ `SECRET_IP_PEPPER`ã€‚

é€™äº›å¯†é‘°å¿…é ˆæ˜¯**å¯†ç¢¼å­¸å¼·éš¨æ©Ÿå€¼**ï¼Œä¸”å…·æœ‰è¶³å¤ çš„é•·åº¦ã€‚ç”±æ–¼ç³»çµ±ä¸­çš„é›œæ¹Šå‡½æ•¸ä½¿ç”¨ SHA-256ï¼Œå› æ­¤å»ºè­°å¯†é‘°é•·åº¦è‡³å°‘ 32 ä½å…ƒçµ„ï¼Œå³ 64 å€‹ Hex å­—å…ƒã€‚å„å€‹å¯†é‘°ä¸è©²ç›¸åŒã€‚

ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢æä¾›çš„ Node.js è…³æœ¬ä¾†è‡ªå‹•ç”¢ç”Ÿé€™äº›éš¨æ©Ÿå¯†é‘°ï¼š

```bash
node generate-secret-keys.js
```

å°‡ç”¢å‡ºçš„å¯†é‘°åŠ å…¥åˆ° `.dev.vars` æª”æ¡ˆä¸­ã€‚å®Œæˆå¾Œï¼Œ`.dev.vars` æª”æ¡ˆæ‡‰è©²é¡ä¼¼ä¸‹é¢é€™æ¨£ï¼š

```dotenv frame="auto"
# .dev.vars
SECRET_ADMIN_PASSWORD_HASH=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SECRET_ADMIN_PASSWORD_SALT=yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy

SECRET_ADMIN_JWT_KEY=zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz
SECRET_COMMENT_HMAC_KEY=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
SECRET_FORMAL_POW_HMAC_KEY=bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
SECRET_IP_PEPPER=cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
```

ä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤ä¾†ä¸Šå‚³é€™äº›è®Šæ•¸ã€‚`--name` ç”¨ä¾†æŒ‡å®šä½ çš„ Worker åç¨±ï¼š

```bash
pnpm exec wrangler secret bulk ".dev.vars" --name "yangchun-comment-be"
```

é è¨ˆæœƒçœ‹åˆ°é¡ä¼¼ä¸‹é¢çš„å›æ‡‰ï¼Œç”±æ–¼æˆ‘å€‘ç›®å‰é‚„æ²’æœ‰å»ºç«‹ Workerï¼Œæ‰€ä»¥å®ƒå•æˆ‘å€‘æ˜¯å¦è¦å»ºç«‹æ–°çš„ Worker ä¸¦åŠ å…¥å¯†é‘°ï¼Œé€™è£¡è«‹è¼¸å…¥ `Y` ä»¥ç¹¼çºŒï¼š

```txt "(Y/n)"
ğŸŒ€ Creating the secrets for the Worker "yangchun-comment-be" 
âœ” There doesn't seem to be a Worker called "yangchun-comment-be".
  Do you want to create a new Worker with that name and add secrets to it? (Y/n)
```

...

```txt
ğŸŒ€ Creating new Worker "yangchun-comment-be"...
âœ¨ Successfully created secret for key: SECRET_ADMIN_PASSWORD_HASH
âœ¨ Successfully created secret for key: SECRET_ADMIN_PASSWORD_SALT
âœ¨ Successfully created secret for key: SECRET_ADMIN_JWT_KEY
âœ¨ Successfully created secret for key: SECRET_COMMENT_HMAC_KEY
âœ¨ Successfully created secret for key: SECRET_FORMAL_POW_HMAC_KEY
âœ¨ Successfully created secret for key: SECRET_IP_PEPPER

Finished processing secrets file:
âœ¨ 6 secrets successfully uploaded
```

<Aside type="caution">
ç³»çµ±ä¸­æœ‰æª¢æŸ¥å¯†é‘°çš„æ©Ÿåˆ¶ï¼Œå¦‚æœå¯†é‘°é•·åº¦ä¸è¶³æˆ–æ ¼å¼ä¸æ­£ç¢ºï¼ŒWorker åœ¨å•Ÿå‹•æ™‚æœƒå¤±æ•—ä¸¦é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ `Environment variable validation failed`ã€‚å› æ­¤è«‹å‹™å¿…ç¢ºä¿å¯†é‘°é•·åº¦ç¬¦åˆè¦æ±‚ã€‚
</Aside>

<Aside type="danger">
å¸¶æœ‰ `SECRET_` å‰ç¶´çš„è®Šæ•¸æ˜¯æ•æ„Ÿè³‡è¨Šï¼Œè«‹å‹™å¿…å¦¥å–„ä¿ç®¡ä¸è¦å…¬é–‹ã€‚å¯¦éš›ä¸Šï¼Œä¸€æ—¦å®Œæˆæœ¬ç¯€çš„æ­¥é©Ÿå¾Œï¼Œä½ å°±ä¸éœ€è¦ï¼ˆä¹Ÿä¸æ‡‰è©²ï¼‰å†æŸ¥çœ‹æˆ–ä¿ç®¡é€™äº›å¯†é‘°ã€‚å®ƒå€‘å„²å­˜åœ¨ Cloudflare Workers çš„ Secrets ä¸­ä¸”ç„¡æ³•è¢«è®€å–æˆ–å°å‡ºã€‚
</Aside>

### E. éƒ¨ç½² Worker

ä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤ä¾†éƒ¨ç½² Worker åˆ° Cloudflareã€‚`--name` ç”¨ä¾†æŒ‡å®šä½ çš„ Worker åç¨±ï¼š

```bash
pnpm exec wrangler deploy --name "yangchun-comment-be"
```

ä½ æ‡‰è©²æœƒçœ‹åˆ°é¡ä¼¼ä¸‹é¢çš„å›æ‡‰ï¼Œå…¶ä¸­åŒ…å«ä½ çš„ Worker ç«¯é»ç¶²å€ï¼š

```bash "https://yangchun-comment-be.<YOUR_SUBDOMAIN>.workers.dev"
Total Upload: 1130.82 KiB / gzip: 203.68 KiB
Worker Startup Time: 39 ms
Your Worker has access to the following bindings:

...

Uploaded yangchun-comment-be (5.42 sec)
Deployed yangchun-comment-be triggers (1.83 sec)
  https://yangchun-comment-be.<YOUR_SUBDOMAIN>.workers.dev
Current Version ID: 1b58de00-53b1-4320-b897-0a035b035c42
```

ä½ å¯ä»¥å˜—è©¦åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹é€™å€‹ç¶²å€ `https://yangchun-comment-be.<YOUR_SUBDOMAIN>.workers.dev/rss/site/<RSS_SITE_PATH>` ä¾†æª¢æŸ¥ Worker æ˜¯å¦æˆåŠŸéƒ¨ç½²ï¼Œé€™å€‹æ˜¯å…¨ç«™çš„ RSS Feed ç¶²å€ï¼Œè¨˜å¾—è¦æŠŠå…¶ä¸­çš„ `<YOUR_SUBDOMAIN>` å’Œ `<RSS_SITE_PATH>` æ›¿æ›æˆä½ çš„å¯¦éš›å€¼ï¼Œæ³¨æ„ç¶²å€æ²’æœ‰å°¾æ–œç·šã€‚å¦‚æœæˆåŠŸçš„è©±ä½ æ‡‰è©²æœƒçœ‹åˆ°ä¸€å€‹é¡ä¼¼ä¸‹é¢çš„ XML å›æ‡‰ï¼š

```xml
<rss version="2.0">
  <channel>
    <title>All Site Comments</title>
    <link>https://your-frontend-url.com</link>
    <description>Latest 0 comments from all posts on the site</description>
    <lastBuildDate>Mon, 12 Jan 2026 11:04:52 GMT</lastBuildDate>
  </channel>
</rss>
```

è‡³æ­¤ï¼Œå¾Œç«¯çš„éƒ¨åˆ†å°±å®Œæˆäº†ï¼

## 3. å‰ç«¯ (client)

ç”±æ–¼å‰ç«¯æ˜¯ä»¥ Lit ç”¢ç”Ÿçš„ Web Component ç™¼ä½ˆçš„ï¼Œå› æ­¤ä½ å¯ä»¥å°‡å®ƒåµŒå…¥åˆ°å¹¾ä¹ä»»ä½•å‰ç«¯æ¡†æ¶ä¸­ï¼ˆä¾‹å¦‚ Reactã€Vueã€Svelte ç­‰ï¼‰ï¼Œç”šè‡³æ˜¯ç„¡æ¡†æ¶çš„ Vanilla JavaScriptã€‚

### A. å®‰è£å¥—ä»¶

æ‰“é–‹ä½ çš„å‰ç«¯å°ˆæ¡ˆï¼Œç„¶å¾Œå®‰è£ Yang Chun Comment çš„å‰ç«¯å¥—ä»¶ [@ziteh/yangchun-comment-client][npm-client]ã€‚ç”±æ–¼ç›®å‰é€™å€‹å°ˆæ¡ˆé‚„ä¸ç©©å®šï¼Œå»ºè­°æ˜ç¢ºæŒ‡å®šç‰ˆæœ¬è™Ÿï¼š

```bash
pnpm add @ziteh/yangchun-comment-client@0.2.0
```

ç„¶å¾Œåœ¨ä½ çš„å°ˆæ¡ˆä¸­å¼•å…¥ä¸¦ä½¿ç”¨å®ƒã€‚åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ã€‚è«‹æ³¨æ„è¦æ›¿æ›ä¸€äº›å±¬æ€§å€¼ï¼š
- `post`ï¼šé€™æ˜¯ç”¨ä¾†è­˜åˆ¥ç•™è¨€æ‰€å±¬çš„æ–‡ç« æˆ–é é¢çš„å”¯ä¸€æ¨™è­˜ç¬¦ã€‚ä½ å¯ä»¥ä½¿ç”¨æ–‡ç« çš„ slug æˆ– IDã€‚
- `apiUrl`ï¼šé€™æ˜¯ä½ éƒ¨ç½²çš„å¾Œç«¯ Worker çš„ URLã€‚
- `lang`ï¼šé€™æ˜¯èªè¨€è¨­å®šï¼Œå¯ä»¥æ ¹æ“šéœ€è¦èª¿æ•´ã€‚
- `adminName`ï¼šé€™æ˜¯ç®¡ç†å“¡çš„åç¨±ï¼Œæœƒé¡¯ç¤ºç‚ºæ–‡ç« ä½œè€…ã€‚
- `prePowDifficulty` å’Œ `prePowMagicWord`ï¼šé€™äº›å€¼å¿…é ˆèˆ‡ä½ åœ¨å¾Œç«¯è¨­å®šçš„å€¼ç›¸ç¬¦ã€‚

```html
<yangchun-comment
  post="default-post"
  apiUrl="https://yangchun-comment-be.<YOUR_SUBDOMAIN>.workers.dev"
  lang="en-US"
  adminName="ZiTe"
  prePowDifficulty="2"
  prePowMagicWord="MAGIC"
></yangchun-comment>
```

ä¸‹é¢æ˜¯ä¸€å€‹ Vanilla JavaScript çš„ç¯„ä¾‹ï¼š

```ts {4,8-15}
// Vanilla example

import "./style.css";
import "@ziteh/yangchun-comment-client";

document.querySelector<HTMLDivElement>("#app")!.innerHTML = `
  <div>
    <yangchun-comment
      post="default-post"
      apiUrl="https://yangchun-comment-be.<YOUR_SUBDOMAIN>.workers.dev"
      lang="en-US"
      adminName="ZiTe"
      prePowDifficulty="2"
      prePowMagicWord="MAGIC"
    ></yangchun-comment>
  </div>
`;
```

### B. èª¿æ•´ CSS

ä½ å¯ä»¥é€é CSS è®Šæ•¸ä¾†èª¿æ•´ Yang Chun Comment çš„å¤–è§€ä»¥ç¬¦åˆä½ çš„ç¶²ç«™è¨­è¨ˆã€‚ä¸‹é¢æ˜¯ä¸€å€‹ç¯„ä¾‹ï¼š

```css
yangchun-comment {
  --ycc-primary-color: #2563eb;
  --ycc-primary-hover: #1d4ed8;
  --ycc-text-color: #ffffff;
  --ycc-text-secondary: #a3a3a3;
  --ycc-bg-color: #242424;
  --ycc-bg-secondary: #4d4d4d;
  --ycc-border-color: #757578;
  --ycc-error-color: #ef4444;
}
```

[cf-d1]: https://developers.cloudflare.com/d1/
[cf-d1-price]: https://developers.cloudflare.com/d1/platform/pricing/
[cf-kv]: https://developers.cloudflare.com/kv/
[cf-kv-price]: https://developers.cloudflare.com/kv/platform/pricing/
[cf-secret]: https://developers.cloudflare.com/workers/configuration/secrets/
[npm-client]: https://www.npmjs.com/package/@ziteh/yangchun-comment-client

[owasp-pbkdf2]: https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html#pbkdf2
